{
  "version": 2,
  "templates": {
    "datadog": {
      "image": "datadog/agent:latest",
      "environment": {
        "DD_API_KEY": "${DATADOG_API_KEY}",
        "DD_SITE": "datadoghq.com",
        "DD_APM_ENABLED": "true",
        "DD_LOGS_ENABLED": "true",
        "DD_PROCESS_AGENT_ENABLED": "true",
        "DD_CONTAINER_EXCLUDE": "name:datadog-agent",
        "DD_CONTAINER_EXCLUDE_METRICS": "name:datadog-agent",
        "DD_CONTAINER_EXCLUDE_LOGS": "name:datadog-agent"
      },
      "volumes": [
        "/var/run/docker.sock:/var/run/docker.sock:ro",
        "/proc/:/host/proc/:ro",
        "/sys/fs/cgroup/:/host/sys/fs/cgroup:ro",
        "/var/lib/docker/containers:/var/lib/docker/containers:ro",
        "/var/log/food-delivery:/var/log/food-delivery:ro"
      ],
      "ports": [
        "8126:8126"
      ]
    }
  },
  "services": {
    "datadog-agent": {
      "extends": "datadog",
      "container_name": "food-delivery-datadog-agent",
      "networks": ["food-network"],
      "restart": "unless-stopped"
    }
  },
  "networks": {
    "food-network": {
      "driver": "bridge"
    }
  }
}
